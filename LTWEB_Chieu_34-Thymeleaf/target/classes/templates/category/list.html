<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Categories</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>
<h2>Danh sách Category</h2>
<table border="1">
    <thead>
        <tr><th>ID</th><th>Name</th><th>Icon</th><th>Action</th></tr>
    </thead>
    <tbody id="categoryTable"></tbody>
</table>

<script>
$(document).ready(function(){
    loadCategories();
});

function loadCategories(){
    $.getJSON("/api/categories", function(page){
        let rows = "";
        page.content.forEach(function(c){
            rows += `<tr>
                        <td>${c.id}</td>
                        <td>${c.name}</td>
                        <td>${c.icon ?? ''}</td>
                        <td>
                            <button onclick="deleteCategory(${c.id})">Xóa</button>
                        </td>
                     </tr>`;
        });
        $("#categoryTable").html(rows);
    });
}

function deleteCategory(id){
    $.ajax({
        url: "/api/categories/" + id,
        type: "DELETE",
        success: function(){
            alert("Đã xóa!");
            loadCategories();
        }
    });
}
</script>
</body>
</html>
